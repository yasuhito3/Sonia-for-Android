# 🎵 Musica Player for Android

**Android + Termux で動く、ミドルウェアなし高音質音楽プレイヤー**

> 🔒 **広告なし・データ収集なし・完全オフライン・ソースコード全公開**
> あなたの音楽データは、あなたのスマホの外に出ません。

[![Platform](https://img.shields.io/badge/platform-Android%20%2B%20Termux-green)](https://f-droid.org/packages/com.termux/)
[![Python](https://img.shields.io/badge/python-3.x-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-orange)](LICENSE)

---

## 📱 スクリーンショット

```
┌─────────────────────────┐
│  ▶ NOW  🎵 MUSIC  📻 RADIO  ⚙ SET  │
├─────────────────────────┤
│  🎶 Xubuntu24版でさらに高音質に！  │
├─────────────────────────┤
│         🎵              │
│    Symphony No.9        │
│    Beethoven            │
│    ████████░░  3:42     │
│                         │
│   ⏮  ▶  ⏹  ⏭          │
│   🔈 ████████░ 85       │
│                         │
│  EQ: [クラシック] ジャズ  │
└─────────────────────────┘
```

---

## ✨ 特徴

### 🔊 高音質再生
- **PulseAudio等のミドルウェアを一切排除**
- `ffmpeg → mpv` 直結パイプラインで音質劣化を最小化
- EQ処理もffmpegフィルタで直接実施

### 📻 多機能
- FLACを含む主要フォーマット対応（`.flac` `.wav` `.mp3` `.m4a` `.aac` `.ogg`）
- 10バンドEQプリセット（クラシック・ジャズ・ロック・ポップ他）
- ゲインプリセット
- インターネットラジオ（Classic FM・NHK-FM・Jazz24 他8局）
- ジャケット画像表示
- プリセット保存・読込

### 📲 スマホ最適化WebUI
- ブラウザで操作（`http://localhost:8080`）
- 同じWifi内の他の端末からも操作可能
- ダークモード対応

---

## 🚀 インストール

### 必要なもの
1. **Android 9以上**
2. **F-Droid** からインストールした **Termux**
   - ⚠️ Google Play版のTermuxは古いため使用不可
   - F-Droid: https://f-droid.org/packages/com.termux/

### インストール手順

**① `install.sh` と `musicaplayer_android.py` を `/sdcard/Download/` にダウンロード**

（このページ右上の「Code」→「Download ZIP」でまとめてダウンロードできます）

**② Termux を開いて以下を実行：**

```bash
bash ~/storage/downloads/install.sh
```

途中でAndroidの「ストレージアクセス許可」ダイアログが出ます。**「許可」を選択**してください。

**③ 完了！以後は `musica` と打つだけ：**

```bash
musica
```

**④ ブラウザで開く：**

```
http://localhost:8080
```

---

## 🎵 使い方

### 音楽ファイルの置き場所

```
内部ストレージ
└── Music/          ← ここに音楽ファイルを入れる
    ├── Classical/
    │   ├── beethoven_sym9.flac
    │   └── cover.jpg    ← ジャケット画像（自動検出）
    └── Jazz/
        └── ...
```

⚠️ **Android 11以降、SDカードへのサードパーティアプリのアクセスは制限されています。**  
内部ストレージの `Music` フォルダをお使いください。

### 操作

| ボタン | 動作 |
|--------|------|
| ▶ | 再生（停止中のみ有効） |
| ⏹ | 停止 |
| ⏮ / ⏭ | 前/次の曲 |
| 音量スライダー | 音量調整（0〜130） |

### EQプリセット

| プリセット | 特徴 |
|-----------|------|
| フラット | 加工なし |
| **クラシック** | 低音の迫力 + ヴァイオリンの輝き（V字型） |
| **ジャズ** | 引き締まった低音 + 煌めく高音 |
| ロック | 全帯域に迫力 |
| ポップ | 中高音を強調 |
| 重低音 | 低音域を大幅ブースト |
| 耳鳴り軽減 | 高音域を抑制 |

---

## 📻 収録ラジオ局

| 局名 | 説明 |
|------|------|
| 🇬🇧 Classic FM | 英国クラシック専門局 |
| 🇬🇧 Classic FM Calm | リラックス系クラシック |
| 🇺🇸 WQXR | ニューヨーク・クラシック |
| 🇨🇭 Radio Swiss Classic | スイス・クラシック |
| 🇫🇷 France Musique | フランス国営クラシック |
| 🇺🇸 Jazz24 | ジャズ専門局 |
| 🇺🇸 SomaFM Groove Salad | チルアウト・アンビエント |
| 🇯🇵 NHK-FM | NHK FM |

---

## 🖥️ Xubuntu24版へのステップアップ

**このAndroid版は「入り口」です。**

本格的な高音質再生は **Xubuntu24 + フル機能版** で：

| 機能 | Android版 | Xubuntu24版 |
|------|-----------|-------------|
| 出力先 | Android自動 | DAC直接指定（`hw:X,0`） |
| 音質上限 | 端末依存 | **DAC直結・最高品質** |
| BPM検索 | ❌ | ✅ |
| ムード検索 | ❌ | ✅ |
| 作曲家・演奏者検索 | ❌ | ✅ |
| アップサンプリング | ❌ | ✅ 192kHz/384kHz |
| 音声認識操作 | ❌ | ✅ |
| ジャケット画像選曲 | ブラウザ内 | ✅ 大画面表示 |

🎶 **ぜひXubuntu24版もお試しください！**

---

## 🔧 技術仕様

### 再生エンジン

```
音楽ファイル
    ↓
ffmpeg（EQ・ゲイン処理）
    ↓ パイプ（ミドルウェアなし）
mpv（デコード・出力）
    ↓
Android AudioTrack
    ↓
Bluetooth / 有線イヤホン（自動切替）
```

### 必要パッケージ（install.shが自動インストール）

- `python` + `mutagen`
- `ffmpeg`
- `mpv`

---

## 📄 ライセンス

MIT License - 自由に使用・改変・配布できます。

---

## 🔒 安心・安全について

### あなたの音楽データはあなたのスマホの外に出ません

Musica Playerは**完全オフライン動作**です。

```
✅ インターネットへのデータ送信 → 一切なし
✅ 広告                         → なし
✅ 個人情報の収集               → なし
✅ アカウント登録               → 不要
✅ サブスクリプション           → 不要・完全無料
✅ ソースコード                 → GitHubで全公開
```

> 「何をしているか誰でも確認できます。
>  あなたの音楽は、あなただけのものです。」

---

### F-Droidは安全ですか？

**はい、むしろGoogle Playより透明性が高いです。**

- F-Droidは**オープンソースアプリ専門**のアプリストアです
- すべてのアプリの**ソースコードが公開**されており、中身を誰でも確認できます
- 世界中のセキュリティ専門家・研究者・大学機関に信頼されています
- Termuxは**500万回以上ダウンロード**された実績あるアプリです

---

### Termuxは怪しくないですか？

**まったく怪しくありません。**

- Termuxは世界中の開発者・研究者が日常的に使うツールです
- 大学のコンピュータサイエンス学科でも教材として使われています
- Musica Playerのインストールで行うことは：
  1. ffmpeg（動画・音声変換の世界標準ソフト）のインストール
  2. mpv（オープンソース音楽再生ソフト）のインストール
  3. Pythonスクリプト（GitHubで全公開）の配置
  
  **それだけです。**

---

### 心配な方へ

インストールスクリプト（`install.sh`）の中身はすべてGitHubで公開しています。
技術者の方に見せて確認していただくことを歓迎します。

```
「信頼してください」ではなく
「確認してください」と言えるのが
オープンソースの強みです。
```

---

## 🙏 謝辞

このプロジェクトは **Claude (Anthropic)** と共同開発しました。

---

*良い音楽ライフを！* 🎵
